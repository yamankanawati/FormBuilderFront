"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[401],{4401:function(e,t,o){o.r(t);var a=o(5893),r=o(7294),l=o(3336),s=o(1163),n=o(4214);t.default=e=>{var t;let o=localStorage.getItem("@user"),c=(0,s.useRouter)(),[i,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(o?JSON.parse(o):void 0),[p,d]=(0,r.useState)(null!==(t=localStorage.getItem("@token"))&&void 0!==t?t:void 0);return(0,r.useEffect)(()=>{console.log("check is auth"),h&&p&&p.length>0&&(console.log(JSON.stringify({user:h,token:p})),n.Z.defaults.headers.common.Authorization="Bearer "+p,u(!0),c.replace({pathname:"/"}))},[h,p]),(0,a.jsx)(l.Z.Provider,{value:{isAuth:i,user:h,login:e=>{let{user:t,token:o}=e;t&&o&&o.length>0&&(g(t),d(o),n.Z.defaults.headers.common.Authorization="Bearer "+o,localStorage.setItem("@token",o),localStorage.setItem("@user",JSON.stringify(t)),console.log("Login success: "+JSON.stringify({user:t,token:o}))),c.replace({pathname:"/"})},logout:()=>{g(void 0),d(void 0),u(!1),localStorage.removeItem("@user"),localStorage.removeItem("@token"),n.Z.defaults.headers.common.Authorization="Bearer ",c.replace({pathname:"/"})}},children:e.children})}},4214:function(e,t,o){var a=o(5121);let r=a.Z.create();r.defaults.baseURL="http://18.231.183.62/api/",r.defaults.headers.options={"Content-Type":"application/json",Accept:"application/json"},t.Z=r}}]);